<ng-form class="form-horizontal environment-variables-panel" name="$ctrl.envVarsForm">
  <div class="form-group">
    <div class="col-sm-12 form-section-title" style="margin-top: 10px; margin-left: 15px; width: 98%"> 环境变量 </div>
    <div class="col-sm-12 environment-variables-panel--explanation">
      {{::$ctrl.explanation}}
    </div>

    <environment-variables-simple-mode
      ng-if="$ctrl.mode == 'simple'"
      ng-model="$ctrl.ngModel"
      on-change="($ctrl.handleSimpleChange)"
      on-switch-mode-click="($ctrl.switchEnvMode)"
      show-help-message="$ctrl.showHelpMessage"
    ></environment-variables-simple-mode>

    <div ng-if="$ctrl.mode == 'advanced'" class="environment-variables-panel--advanced">
      <div class="col-sm-12 text-clickable">
        <button type="button" class="btn btn-link btn-sm hover:no-underline !ml-0 p-0 vertical-center" ng-click="$ctrl.switchEnvMode()">
          <pr-icon icon="'list'" feather="true"></pr-icon> 简单模式
        </button>
      </div>
      <div class="col-sm-12 small text-muted">
        <pr-icon icon="'alert-circle'" mode="'primary'" feather="true"></pr-icon>
        切换到简单模式，逐行定义变量，或从.env文件加载。
      </div>
      <div class="form-group" style="margin-left: 1px">
        <code-editor identifier="environment-variables-editor" placeholder="例如 key=value" value="$ctrl.editorText" yml="false" on-change="($ctrl.editorUpdate)"></code-editor>
      </div>
      <div class="col-sm-12 small text-muted" ng-if="$ctrl.showHelpMessage">
        <pr-icon icon="'alert-circle'" mode="'primary'" feather="true"></pr-icon>
        在手动或通过webhook进行重新部署之前，环境变化将不会生效。
      </div>
    </div>
  </div>
</ng-form>
