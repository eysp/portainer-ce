<rd-header id="view-top">
  <rd-header-title title-text="自定义模板">
    <a data-toggle="tooltip" title="刷新" ui-sref="docker.templates.custom" ui-sref-opts="{reload: true}">
      <i class="fa fa-sync" aria-hidden="true"></i>
    </a>
  </rd-header-title>
  <rd-header-content>自定义模板</rd-header-content>
</rd-header>
<div class="row">
  <stack-from-template-form
    ng-if="$ctrl.state.selectedTemplate"
    template="$ctrl.state.selectedTemplate"
    form-values="$ctrl.formValues"
    state="$ctrl.state"
    create-template="$ctrl.createStack"
    unselect-template="$ctrl.unselectTemplate"
  >
    <advanced-form>
      <div class="form-group">
        <div class="col-sm-12">
          <a class="small interactive" ng-show="!$ctrl.state.showAdvancedOptions" ng-click="$ctrl.state.showAdvancedOptions = true;">
            <i class="fa fa-plus space-right" aria-hidden="true"></i> 自定义堆栈
          </a>
          <a class="small interactive" ng-show="$ctrl.state.showAdvancedOptions" ng-click="$ctrl.state.showAdvancedOptions = false;">
            <i class="fa fa-minus space-right" aria-hidden="true"></i> 隐藏自定义堆栈
          </a>
        </div>
      </div>
      <div ng-if="$ctrl.state.showAdvancedOptions">
        <!-- web-editor -->
        <div class="col-sm-12 form-section-title">
          网页编辑
        </div>
        <div class="form-group">
          <span class="col-sm-12 text-muted small">
            您可以在
            <a href="https://docs.docker.com/compose/compose-file/" target="_blank">
              官方文档
            </a>
            中获得有关撰写文件格式的更多信息。
          </span>
        </div>
        <div class="form-group">
          <div class="col-sm-12">
            <code-editor
              identifier="custom-template-creation-editor"
              placeholder="# 在此处定义或粘贴 docker-compose 文件的内容"
              yml="true"
              value="$ctrl.formValues.fileContent"
              on-change="($ctrl.editorUpdate)"
            ></code-editor>
          </div>
        </div>
        <!-- !web-editor -->
      </div>
    </advanced-form>
  </stack-from-template-form>
</div>
<div class="row">
  <div class="col-sm-12">
    <custom-templates-list
      ng-if="$ctrl.templates"
      title-text="模板"
      title-icon="fa-rocket"
      templates="$ctrl.templates"
      table-key="customTemplates"
      create-path="docker.templates.custom.new"
      edit-path="docker.templates.custom.edit"
      is-edit-allowed="$ctrl.isEditAllowed"
      on-select-click="($ctrl.selectTemplate)"
      on-delete-click="($ctrl.confirmDelete)"
    ></custom-templates-list>
  </div>
</div>
